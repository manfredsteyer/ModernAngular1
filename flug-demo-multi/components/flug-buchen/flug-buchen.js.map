{"version":3,"sources":["flug-buchen/flug-buchen.js"],"names":[],"mappings":"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","file":"flug-buchen/flug-buchen.js","sourcesContent":["export class FlugBuchenController {\r\n\r\n    constructor($http, $log, baseUrl, $router) {\r\n        this.$http = $http;\r\n        this.$log = $log;\r\n        this.baseUrl = baseUrl;\r\n        \r\n        $router.config([\r\n            { path: '/', components: { main: 'passagier', info: 'flugBuchenInfo' } },\r\n            { path: '/passagier', components: { main: 'passagier', info: 'flugBuchenInfo' } },\r\n            { path: '/flug', components: { main: 'flug', info: 'flugBuchenInfo' } },\r\n            { path: '/buchen', components: { main: 'buchen', info: 'flugBuchenInfo' } },\r\n            { path: '/passagier/:id', components: { main: 'passagierEdit', info: 'passagierEditInfo' } }\r\n        ]);\r\n    }\r\n\r\n    clearMessage() {\r\n        this.message = \"\";\r\n    }\r\n\r\n    loadPassagiere() {\r\n\r\n        var that = this;\r\n\r\n        var params = {};\r\n\r\n        if (that.passagierNameFilter) {\r\n            params.name = that.passagierNameFilter;\r\n        } else if (that.passagierNrFilter) {\r\n            params.pNummer = that.passagierNrFilter;\r\n        }\r\n\r\n        this.$http\r\n            .get(this.baseUrl + \"/api/passagier\", { params: params })\r\n            .then((result) => {\r\n\r\n                that.processPassagiere(result.data);\r\n\r\n            }).catch((p) => {\r\n\r\n                that.message = \"Beim Laden der Daten ist ein Fehler aufgetreten\";\r\n\r\n                that.$log.error(\"Fehler beim Laden von Passagieren\");\r\n                that.$log.error(p.data);\r\n                that.$log.error(p.status);\r\n            });\r\n\r\n    }\r\n\r\n    processPassagiere(p) {\r\n\r\n        if (angular.isArray(p)) {\r\n            this.passagiere = p;   \r\n        } else {\r\n            this.passagiere = [p];   \r\n        }\r\n    }\r\n\r\n\r\n    selectPassagier(p) {\r\n        this.selectedPassagier = p;\r\n    }\r\n\r\n    loadFluege() {\r\n\r\n        var that = this;\r\n        var params = {};\r\n\r\n        if (this.flugNrFilter) {\r\n            params.flugNummer = this.flugNrFilter;\r\n        } else if (this.flugVonFilter && this.flugNachFilter) {\r\n            params.abflugOrt = this.flugVonFilter;\r\n            params.zielOrt = this.flugNachFilter;\r\n        }\r\n\r\n        this.$http.get(this.baseUrl + \"/api/flug\", { params: params }).then((result) => {\r\n\r\n            var passagiere = result.data;\r\n            that.processFluege(passagiere);\r\n\r\n        }).catch((p) => {\r\n                that.message = \"Beim Laden der Daten ist ein Fehler aufgetreten\";\r\n\r\n                that.$log.error(\"Fehler beim Laden von Flügen\");\r\n                that.$log.error(p.data);\r\n                that.$log.error(p.status);\r\n        });\r\n    }\r\n\r\n    processFluege(fluege) {\r\n\r\n        if (!angular.isArray(fluege)) {\r\n            var flug = fluege;\r\n            this.fluege = new Array(flug);\r\n        }\r\n        else {\r\n            this.fluege = fluege;\r\n        }\r\n    }\r\n\r\n    selectFlug(flug) {\r\n        this.selectedFlug = flug;\r\n    }\r\n\r\n    buchen() {\r\n\r\n        var that = this;\r\n\r\n        if (!this.selectedFlug || !this.selectedPassagier) {\r\n            this.message = \"Bitte wählen Sie einen Flug und einen Passagier aus!\";\r\n            return;\r\n        }\r\n\r\n        var buchung = {\r\n            FlugID: that.selectedFlug.id,\r\n            PassagierID: that.selectedPassagier.id\r\n        };\r\n\r\n        that.$http.post(this.baseUrl + \"/api/buchung\", buchung).then((result) => {\r\n            that.message = \"Gebucht!\";\r\n        }).catch((reason) => {\r\n                that.message = \"Der Flug konnte nicht gebucht werden: \" + reason;\r\n        });\r\n\r\n    }\r\n\r\n    processBuchungen(fluege) {\r\n        this.buchungen = fluege;\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}